<!DOCTYPE html>
<html>
<head>
    <title>语音识别</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>语音识别</h1>
    <input type="file" id="audioFile" accept="audio/*">
    <br>
    <button onclick="transcribe()">开始识别</button>
    <br>
    <div id="result"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script>
        function transcribe() {
            var audioFile = document.getElementById('audioFile').files[0];
            if (audioFile) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    var audioData = e.target.result;
                    var engineType = 'sms16k'; // 引擎类型
                    var aue = 'raw'; // 音频编码
                    var resultLevel = 'plain'; // 结果级别

                    // 进行语音识别的逻辑
                    // 使用 audioData 进行识别，并将结果显示在页面上
                    // 你需要将API密钥和其他参数填写在这里

                    // 示例代码：
                    var appId = '3585358e';
                    var secretKey = '391e3b79b207d47ce6073a0748e0c1a3';

                    // 进行语音识别的逻辑
                    // 使用 audioData 进行识别，并将结果显示在页面上
                    // 你需要将API密钥和其他参数填写在这里

                    // 示例代码：
                    var url = 'https://raasr.xfyun.cn/v2/api/upload';
                    var data = {
                        audio: audioData,
                        engineType: engineType,
                        aue: aue,
                        resultLevel: resultLevel
                    };
                    var headers = {
    'Content-Type': 'application/json; charset=UTF-8',
    'Chunked': 'false',
    'X-AppId': appId,
    'X-SecretKey': secretKey
};


                    $.ajax({
                        url: url,
                        type: 'POST',
                        headers: headers,
                        data: JSON.stringify(data),
                        success: function(response) {
                            // 处理识别结果
                            var resultDiv = document.getElementById('result');
                            resultDiv.innerHTML = response.result;
                        },
                        error: function(error) {
                            console.log(error);
                        }
                    });
                };
                reader.readAsDataURL(audioFile);
            } else {
                alert('请选择一个音频文件');
            }
        }
    </script>
</body>
</html>
